ARM GAS  C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"port_handler.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.UART_DMA_Init,"ax",%progbits
  16              		.align	1
  17              		.global	UART_DMA_Init
  18              		.arch armv7-m
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu softvfp
  24              	UART_DMA_Init:
  25              	.LFB527:
  26              		.file 1 "Src/port_handler.c"
   1:Src/port_handler.c **** #include "port_handler.h"
   2:Src/port_handler.c **** #include "main.h"
   3:Src/port_handler.c **** 
   4:Src/port_handler.c **** extern DMA_HandleTypeDef hdma_usart1_rx;
   5:Src/port_handler.c **** extern UART_HandleTypeDef huart1;
   6:Src/port_handler.c **** extern MessageQueue *message;
   7:Src/port_handler.c **** uint8_t temp_length;
   8:Src/port_handler.c **** 
   9:Src/port_handler.c **** /* UART Managemnt ------------------------------------------------------------*/
  10:Src/port_handler.c **** 
  11:Src/port_handler.c **** 
  12:Src/port_handler.c **** void UART_DMA_Init(void) {
  27              		.loc 1 12 26 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31 0000 08B5     		push	{r3, lr}
  32              	.LCFI0:
  33              		.cfi_def_cfa_offset 8
  34              		.cfi_offset 3, -8
  35              		.cfi_offset 14, -4
  13:Src/port_handler.c ****   rd_ptr = 0;
  36              		.loc 1 13 3 view .LVU1
  37              		.loc 1 13 10 is_stmt 0 view .LVU2
  38 0002 074B     		ldr	r3, .L3
  39 0004 0022     		movs	r2, #0
  40 0006 1A70     		strb	r2, [r3]
  14:Src/port_handler.c ****   __HAL_UART_ENABLE_IT(&huart1, UART_IT_IDLE);   // enable idle line interrupt  
  41              		.loc 1 14 3 is_stmt 1 view .LVU3
  42 0008 0648     		ldr	r0, .L3+4
  43 000a 0268     		ldr	r2, [r0]
  44 000c D368     		ldr	r3, [r2, #12]
ARM GAS  C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s 			page 2


  45 000e 43F01003 		orr	r3, r3, #16
  46 0012 D360     		str	r3, [r2, #12]
  15:Src/port_handler.c ****   HAL_UART_Receive_DMA(&huart1, rxBuffer, UART_RX__SZ);
  47              		.loc 1 15 3 view .LVU4
  48 0014 4022     		movs	r2, #64
  49 0016 0449     		ldr	r1, .L3+8
  50 0018 FFF7FEFF 		bl	HAL_UART_Receive_DMA
  51              	.LVL0:
  16:Src/port_handler.c **** }
  52              		.loc 1 16 1 is_stmt 0 view .LVU5
  53 001c 08BD     		pop	{r3, pc}
  54              	.L4:
  55 001e 00BF     		.align	2
  56              	.L3:
  57 0020 00000000 		.word	rd_ptr
  58 0024 00000000 		.word	huart1
  59 0028 00000000 		.word	rxBuffer
  60              		.cfi_endproc
  61              	.LFE527:
  63              		.section	.text.transmit_buffer,"ax",%progbits
  64              		.align	1
  65              		.global	transmit_buffer
  66              		.syntax unified
  67              		.thumb
  68              		.thumb_func
  69              		.fpu softvfp
  71              	transmit_buffer:
  72              	.LVL1:
  73              	.LFB528:
  17:Src/port_handler.c **** 
  18:Src/port_handler.c **** 
  19:Src/port_handler.c **** void transmit_buffer(uint8_t response[], uint16_t length){
  74              		.loc 1 19 58 is_stmt 1 view -0
  75              		.cfi_startproc
  76              		@ args = 0, pretend = 0, frame = 0
  77              		@ frame_needed = 0, uses_anonymous_args = 0
  78              		@ link register save eliminated.
  20:Src/port_handler.c ****   // transmit reply here
  21:Src/port_handler.c **** }
  79              		.loc 1 21 1 view .LVU7
  80 0000 7047     		bx	lr
  81              		.cfi_endproc
  82              	.LFE528:
  84              		.section	.text.rxBuffer_is_empty,"ax",%progbits
  85              		.align	1
  86              		.global	rxBuffer_is_empty
  87              		.syntax unified
  88              		.thumb
  89              		.thumb_func
  90              		.fpu softvfp
  92              	rxBuffer_is_empty:
  93              	.LFB530:
  22:Src/port_handler.c **** 
  23:Src/port_handler.c **** void UART_RxComplete(void) {
  24:Src/port_handler.c ****   while(!rxBuffer_is_empty() && !isFull(message)){
  25:Src/port_handler.c ****     enQueue(message, rxBuffer_Get());
  26:Src/port_handler.c ****   }
ARM GAS  C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s 			page 3


  27:Src/port_handler.c ****   volatile int x = 1;
  28:Src/port_handler.c **** }
  29:Src/port_handler.c **** 
  30:Src/port_handler.c **** uint8_t rxBuffer_is_empty(void) {
  94              		.loc 1 30 33 view -0
  95              		.cfi_startproc
  96              		@ args = 0, pretend = 0, frame = 0
  97              		@ frame_needed = 0, uses_anonymous_args = 0
  98              		@ link register save eliminated.
  31:Src/port_handler.c ****   uint16_t dma_ptr = UART_DMA_WRITE_PTR;
  99              		.loc 1 31 3 view .LVU9
 100              		.loc 1 31 22 is_stmt 0 view .LVU10
 101 0000 074B     		ldr	r3, .L9
 102 0002 5B6B     		ldr	r3, [r3, #52]
 103 0004 1B68     		ldr	r3, [r3]
 104 0006 5B68     		ldr	r3, [r3, #4]
 105 0008 9BB2     		uxth	r3, r3
 106              	.LVL2:
  32:Src/port_handler.c **** 	if(rd_ptr == dma_ptr) {
 107              		.loc 1 32 2 is_stmt 1 view .LVU11
 108              		.loc 1 32 12 is_stmt 0 view .LVU12
 109 000a 064A     		ldr	r2, .L9+4
 110 000c 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 111              		.loc 1 32 4 view .LVU13
 112 000e 5B42     		rsbs	r3, r3, #0
 113              	.LVL3:
 114              		.loc 1 32 4 view .LVU14
 115 0010 03F03F03 		and	r3, r3, #63
 116              	.LVL4:
 117              		.loc 1 32 4 view .LVU15
 118 0014 9A42     		cmp	r2, r3
 119 0016 01D0     		beq	.L8
  33:Src/port_handler.c **** 		return 1;
  34:Src/port_handler.c **** 	}
  35:Src/port_handler.c **** 	return 0;
 120              		.loc 1 35 9 view .LVU16
 121 0018 0020     		movs	r0, #0
 122 001a 7047     		bx	lr
 123              	.L8:
  33:Src/port_handler.c **** 		return 1;
 124              		.loc 1 33 10 view .LVU17
 125 001c 0120     		movs	r0, #1
  36:Src/port_handler.c **** }
 126              		.loc 1 36 1 view .LVU18
 127 001e 7047     		bx	lr
 128              	.L10:
 129              		.align	2
 130              	.L9:
 131 0020 00000000 		.word	huart1
 132 0024 00000000 		.word	rd_ptr
 133              		.cfi_endproc
 134              	.LFE530:
 136              		.section	.text.rxBuffer_Get,"ax",%progbits
 137              		.align	1
 138              		.global	rxBuffer_Get
 139              		.syntax unified
 140              		.thumb
ARM GAS  C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s 			page 4


 141              		.thumb_func
 142              		.fpu softvfp
 144              	rxBuffer_Get:
 145              	.LFB531:
  37:Src/port_handler.c **** 
  38:Src/port_handler.c **** uint8_t rxBuffer_Get(void) {
 146              		.loc 1 38 28 is_stmt 1 view -0
 147              		.cfi_startproc
 148              		@ args = 0, pretend = 0, frame = 0
 149              		@ frame_needed = 0, uses_anonymous_args = 0
 150              		@ link register save eliminated.
  39:Src/port_handler.c **** 	uint8_t c = 0;
 151              		.loc 1 39 2 view .LVU20
 152              	.LVL5:
  40:Src/port_handler.c ****   uint16_t dma_ptr = UART_DMA_WRITE_PTR;
 153              		.loc 1 40 3 view .LVU21
 154              		.loc 1 40 22 is_stmt 0 view .LVU22
 155 0000 0B4B     		ldr	r3, .L14
 156 0002 5B6B     		ldr	r3, [r3, #52]
 157 0004 1B68     		ldr	r3, [r3]
 158 0006 5B68     		ldr	r3, [r3, #4]
 159 0008 9BB2     		uxth	r3, r3
 160              	.LVL6:
  41:Src/port_handler.c **** 	if(rd_ptr != dma_ptr) {
 161              		.loc 1 41 2 is_stmt 1 view .LVU23
 162              		.loc 1 41 12 is_stmt 0 view .LVU24
 163 000a 0A4A     		ldr	r2, .L14+4
 164 000c 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 165 000e 91B2     		uxth	r1, r2
 166              		.loc 1 41 4 view .LVU25
 167 0010 5B42     		rsbs	r3, r3, #0
 168              	.LVL7:
 169              		.loc 1 41 4 view .LVU26
 170 0012 03F03F03 		and	r3, r3, #63
 171              	.LVL8:
 172              		.loc 1 41 4 view .LVU27
 173 0016 9942     		cmp	r1, r3
 174 0018 07D0     		beq	.L13
  42:Src/port_handler.c **** 		c = rxBuffer[rd_ptr++];
 175              		.loc 1 42 3 is_stmt 1 view .LVU28
 176              		.loc 1 42 22 is_stmt 0 view .LVU29
 177 001a 531C     		adds	r3, r2, #1
 178              		.loc 1 42 5 view .LVU30
 179 001c 0649     		ldr	r1, .L14+8
 180 001e 885C     		ldrb	r0, [r1, r2]	@ zero_extendqisi2
 181              	.LVL9:
  43:Src/port_handler.c **** 		rd_ptr &= (UART_RX__SZ - 1);
 182              		.loc 1 43 3 is_stmt 1 view .LVU31
 183              		.loc 1 43 10 is_stmt 0 view .LVU32
 184 0020 03F03F03 		and	r3, r3, #63
 185 0024 034A     		ldr	r2, .L14+4
 186 0026 1370     		strb	r3, [r2]
 187 0028 7047     		bx	lr
 188              	.LVL10:
 189              	.L13:
  39:Src/port_handler.c ****   uint16_t dma_ptr = UART_DMA_WRITE_PTR;
 190              		.loc 1 39 10 view .LVU33
ARM GAS  C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s 			page 5


 191 002a 0020     		movs	r0, #0
 192              	.LVL11:
  44:Src/port_handler.c **** 	}
  45:Src/port_handler.c **** 	return c;
 193              		.loc 1 45 2 is_stmt 1 view .LVU34
  46:Src/port_handler.c **** }
 194              		.loc 1 46 1 is_stmt 0 view .LVU35
 195 002c 7047     		bx	lr
 196              	.L15:
 197 002e 00BF     		.align	2
 198              	.L14:
 199 0030 00000000 		.word	huart1
 200 0034 00000000 		.word	rd_ptr
 201 0038 00000000 		.word	rxBuffer
 202              		.cfi_endproc
 203              	.LFE531:
 205              		.section	.text.UART_RxComplete,"ax",%progbits
 206              		.align	1
 207              		.global	UART_RxComplete
 208              		.syntax unified
 209              		.thumb
 210              		.thumb_func
 211              		.fpu softvfp
 213              	UART_RxComplete:
 214              	.LFB529:
  23:Src/port_handler.c ****   while(!rxBuffer_is_empty() && !isFull(message)){
 215              		.loc 1 23 28 is_stmt 1 view -0
 216              		.cfi_startproc
 217              		@ args = 0, pretend = 0, frame = 8
 218              		@ frame_needed = 0, uses_anonymous_args = 0
 219 0000 10B5     		push	{r4, lr}
 220              	.LCFI1:
 221              		.cfi_def_cfa_offset 8
 222              		.cfi_offset 4, -8
 223              		.cfi_offset 14, -4
 224 0002 82B0     		sub	sp, sp, #8
 225              	.LCFI2:
 226              		.cfi_def_cfa_offset 16
  24:Src/port_handler.c ****     enQueue(message, rxBuffer_Get());
 227              		.loc 1 24 3 view .LVU37
 228              	.L17:
  24:Src/port_handler.c ****     enQueue(message, rxBuffer_Get());
 229              		.loc 1 24 8 view .LVU38
  24:Src/port_handler.c ****     enQueue(message, rxBuffer_Get());
 230              		.loc 1 24 10 is_stmt 0 view .LVU39
 231 0004 FFF7FEFF 		bl	rxBuffer_is_empty
 232              	.LVL12:
  24:Src/port_handler.c ****     enQueue(message, rxBuffer_Get());
 233              		.loc 1 24 8 view .LVU40
 234 0008 68B9     		cbnz	r0, .L18
  24:Src/port_handler.c ****     enQueue(message, rxBuffer_Get());
 235              		.loc 1 24 34 discriminator 1 view .LVU41
 236 000a 094B     		ldr	r3, .L21
 237 000c 1868     		ldr	r0, [r3]
 238 000e FFF7FEFF 		bl	isFull
 239              	.LVL13:
  24:Src/port_handler.c ****     enQueue(message, rxBuffer_Get());
ARM GAS  C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s 			page 6


 240              		.loc 1 24 30 discriminator 1 view .LVU42
 241 0012 40B9     		cbnz	r0, .L18
  25:Src/port_handler.c ****   }
 242              		.loc 1 25 5 is_stmt 1 view .LVU43
 243 0014 064B     		ldr	r3, .L21
 244 0016 1C68     		ldr	r4, [r3]
 245 0018 FFF7FEFF 		bl	rxBuffer_Get
 246              	.LVL14:
 247 001c 0146     		mov	r1, r0
 248 001e 2046     		mov	r0, r4
 249 0020 FFF7FEFF 		bl	enQueue
 250              	.LVL15:
 251 0024 EEE7     		b	.L17
 252              	.L18:
  27:Src/port_handler.c **** }
 253              		.loc 1 27 3 view .LVU44
  27:Src/port_handler.c **** }
 254              		.loc 1 27 16 is_stmt 0 view .LVU45
 255 0026 0123     		movs	r3, #1
 256 0028 0193     		str	r3, [sp, #4]
  28:Src/port_handler.c **** 
 257              		.loc 1 28 1 view .LVU46
 258 002a 02B0     		add	sp, sp, #8
 259              	.LCFI3:
 260              		.cfi_def_cfa_offset 8
 261              		@ sp needed
 262 002c 10BD     		pop	{r4, pc}
 263              	.L22:
 264 002e 00BF     		.align	2
 265              	.L21:
 266 0030 00000000 		.word	message
 267              		.cfi_endproc
 268              	.LFE529:
 270              		.section	.text.HAL_UART_RxCpltCallback,"ax",%progbits
 271              		.align	1
 272              		.global	HAL_UART_RxCpltCallback
 273              		.syntax unified
 274              		.thumb
 275              		.thumb_func
 276              		.fpu softvfp
 278              	HAL_UART_RxCpltCallback:
 279              	.LVL16:
 280              	.LFB532:
  47:Src/port_handler.c **** 
  48:Src/port_handler.c **** void HAL_UART_RxCpltCallback(UART_HandleTypeDef *huart)
  49:Src/port_handler.c **** {
 281              		.loc 1 49 1 is_stmt 1 view -0
 282              		.cfi_startproc
 283              		@ args = 0, pretend = 0, frame = 0
 284              		@ frame_needed = 0, uses_anonymous_args = 0
 285              		.loc 1 49 1 is_stmt 0 view .LVU48
 286 0000 08B5     		push	{r3, lr}
 287              	.LCFI4:
 288              		.cfi_def_cfa_offset 8
 289              		.cfi_offset 3, -8
 290              		.cfi_offset 14, -4
  50:Src/port_handler.c ****   UART_RxComplete();
ARM GAS  C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s 			page 7


 291              		.loc 1 50 3 is_stmt 1 view .LVU49
 292 0002 FFF7FEFF 		bl	UART_RxComplete
 293              	.LVL17:
  51:Src/port_handler.c **** }
 294              		.loc 1 51 1 is_stmt 0 view .LVU50
 295 0006 08BD     		pop	{r3, pc}
 296              		.cfi_endproc
 297              	.LFE532:
 299              		.comm	temp_length,1,1
 300              		.comm	rd_ptr,1,1
 301              		.comm	txBuffer,64,4
 302              		.comm	rxBuffer,64,4
 303              		.text
 304              	.Letext0:
 305              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\
 306              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\
 307              		.file 4 "c:\\program files (x86)\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\
 308              		.file 5 "c:\\program files (x86)\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\
 309              		.file 6 "c:\\program files (x86)\\gnu tools arm embedded\\9 2019-q4-major\\lib\\gcc\\arm-none-eabi
 310              		.file 7 "c:\\program files (x86)\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\
 311              		.file 8 "c:\\program files (x86)\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\
 312              		.file 9 "Inc/queue.h"
 313              		.file 10 "Inc/port_handler.h"
 314              		.file 11 "Drivers/CMSIS/Include/core_cm3.h"
 315              		.file 12 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 316              		.file 13 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 317              		.file 14 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 318              		.file 15 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 319              		.file 16 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_uart.h"
 320              		.file 17 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 321              		.file 18 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_ll_dma.h"
ARM GAS  C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s 			page 8


DEFINED SYMBOLS
                            *ABS*:00000000 port_handler.c
C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s:16     .text.UART_DMA_Init:00000000 $t
C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s:24     .text.UART_DMA_Init:00000000 UART_DMA_Init
C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s:57     .text.UART_DMA_Init:00000020 $d
                            *COM*:00000001 rd_ptr
                            *COM*:00000040 rxBuffer
C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s:64     .text.transmit_buffer:00000000 $t
C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s:71     .text.transmit_buffer:00000000 transmit_buffer
C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s:85     .text.rxBuffer_is_empty:00000000 $t
C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s:92     .text.rxBuffer_is_empty:00000000 rxBuffer_is_empty
C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s:131    .text.rxBuffer_is_empty:00000020 $d
C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s:137    .text.rxBuffer_Get:00000000 $t
C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s:144    .text.rxBuffer_Get:00000000 rxBuffer_Get
C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s:199    .text.rxBuffer_Get:00000030 $d
C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s:206    .text.UART_RxComplete:00000000 $t
C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s:213    .text.UART_RxComplete:00000000 UART_RxComplete
C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s:266    .text.UART_RxComplete:00000030 $d
C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s:271    .text.HAL_UART_RxCpltCallback:00000000 $t
C:\Users\Brandon\AppData\Local\Temp\cc1LGuOc.s:278    .text.HAL_UART_RxCpltCallback:00000000 HAL_UART_RxCpltCallback
                            *COM*:00000001 temp_length
                            *COM*:00000040 txBuffer

UNDEFINED SYMBOLS
HAL_UART_Receive_DMA
huart1
isFull
enQueue
message
